<!DOCTYPE html>
<html>
<head>
  <title>ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</title>
</head>
<body>
  <h1>ìë™ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h1>
  <div id="result"></div>
  <script>
    const API_URL = 'http://localhost:3000/api';
    const resultDiv = document.getElementById('result');
    
    async function test() {
      resultDiv.innerHTML = '<p>í…ŒìŠ¤íŠ¸ ì‹œì‘...</p>';
      
      try {
        // 1. Codespaces ì‚¬ìš©ì í™•ì¸
        resultDiv.innerHTML += '<p>1ï¸âƒ£ Codespaces ì‚¬ìš©ì í™•ì¸ ì¤‘...</p>';
        const res1 = await fetch(`${API_URL}/codespaces-user`);
        const data1 = await res1.json();
        resultDiv.innerHTML += `<p>âœ… ì‚¬ìš©ì: ${JSON.stringify(data1)}</p>`;
        
        // 2. ìë™ ë¡œê·¸ì¸
        resultDiv.innerHTML += '<p>2ï¸âƒ£ ìë™ ë¡œê·¸ì¸ ì‹œë„ ì¤‘...</p>';
        const res2 = await fetch(`${API_URL}/auth/codespaces`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data1.user)
        });
        const data2 = await res2.json();
        resultDiv.innerHTML += `<p>âœ… ë¡œê·¸ì¸ ì„±ê³µ: ${JSON.stringify(data2.user)}</p>`;
        resultDiv.innerHTML += `<p>ğŸ”‘ í† í°: ${data2.token.substring(0, 50)}...</p>`;
        
      } catch (error) {
        resultDiv.innerHTML += `<p style="color:red">âŒ ì˜¤ë¥˜: ${error.message}</p>`;
        console.error(error);
      }
    }
    
    test();
  </script>
</body>
</html>
